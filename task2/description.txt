Задание №2
Существует API, которое умеет отвечать по трём URL: /countries, /cities и /populations. Клиентское приложение подсчитывает численность населения в Африке. Запросы друг от друга не зависят. Чтобы браузер пользователя не простаивал, клиентскому приложению важно уметь делать все три запроса одновременно. Реализацией API является функция getData(url, callback), которая принимает строку с URL запроса и функцию обратного вызова. В случае ошибки в callback первым аргументом будет передана строка ошибки, в случае успеха вторым аргументом будет передан ответ API.

Вам досталась реализация клиентского приложения, которое должно решать описанную выше задачу. Но в коде приложения есть ошибки, из-за которых фактический результат работы отличается от ожидаемого. Сам код здесь.

Как должно быть: приложение выводит в консоль суммарную популяцию в Африке.
Как на самом деле: приложение не выводит в консоль ничего.

Задание

Найдите ошибку в коде приложения, из-за которой реальный результат работы отличается от ожидаемого. Опишите, как эта ошибка могла возникнуть и как её избежать в будущем.
Добавьте в приложение новую возможность — диалог с пользователем. Приложение спрашивает название страны или города, а затем показывает численность населения. Для диалога можно использовать window.prompt.
Результат пришлите в виде двух ссылок: на работающий пример и на исходный код на GitHub.


ОБЪЯСНЕНИЕ ПОЧЕМУ ВОЗНИКЛА ОШИБКА.

Цикл по значениям requests срабатывает быстрее чем приходит ответ от функции getData, поэтому изначально внутрь функции callback приходит неправильное значение request(текущего url сегмента API). Поэтому необходимо обернуть callback в функцию (можно использвать анонимную функцию) и передать в нее текущее значение request. После этого значение request в callback будет правильным.